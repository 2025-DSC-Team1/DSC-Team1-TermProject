<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>DSC 1팀 협업 텍스트 편집기</title>

    <script>
      (function() {
        const originalDefine = customElements.define;
        customElements.define = function(name, constructor, options) {
          if (customElements.get(name)) {
            console.warn(`⚠️ 커스텀 엘리먼트 '${name}' 이미 정의되어 스킵함`);
            return;
          }
          return originalDefine.call(this, name, constructor, options);
        };
      })();
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <h1>협업 텍스트 편집기</h1>
    <div id="userIdDisplay">
      사용자: —
    </div>
    <div id="userListDisplay" class="user-list">
      연결된 사용자: —
    </div>
    <div class="button-group">
      <button id="connect" onclick="connect()">연결</button>
      <button id="disconnect" onclick="disconnect()">연결 해제</button>
      <button id="saveFile" onclick="saveToServer()" disabled>서버에 저장</button>
      <button id="loadFile" onclick="showLoadList()" disabled>서버에서 불러오기</button>
    </div>
    <div id="fileSelection" style="display: none; margin-top: 10px;">
      <label for="fileDropdown">불러올 파일 선택:</label>
      <select id="fileDropdown">
        <!-- JS에서 <option> 요소들을 동적으로 추가할 예정 -->
      </select>
      <button id="confirmLoad" onclick="confirmLoad()">불러오기</button>
      <button onclick="hideLoadList()">취소</button>
    </div>

    <div id="introduce">2025 DSC 1팀</div>

    <div id="status" class="disconnected">연결 상태: 연결 안됨</div>

    <div id="editor" contenteditable="true"></div>

    <div id="log">
      <strong>📨 메시지 로그:</strong>
    </div>

    <script type="text/javascript" src="script.js"></script>
  </body>
</html>
